<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoOCR_EBSDK</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/index.css' %}">
</head>

<body>
    <!-- 导航栏 -->
    <div style="background-color: white; height: 25px; padding: 15px 250px">
        <a href="#" style="text-decoration:none;color:black;font-size:18px;"><strong>文心一言</strong></a>
    </div>

    <!-- 主体 -->
    <div style="display: flex; flex-direction: column; height: 100vh;">
        <!-- 上部分 -->
        <div style="background-color: #F8F7FC; flex: 25px; text-align: center;">
            <h1 style="margin-top: 4%;font-family: '黑体';font-size:40px;">新一代交互式知识学习引擎</h1>
            <form style="margin-top: 3%;">
                <div style="display: flex; justify-content: center;">
                    <div style="display: flex; justify-content: center;align-items: center;">
                        <input placeholder="请输入您的问题" class="index_question" id="question">
                        <button class="btn" onclick="submitQuestion(this)">开始学习</button>
                    </div>
                </div>
            </form>
            <p>尝试输入"机器学习"等词汇</p>
        </div>
        <!-- 下部分 -->
        <div style="background-color: #F8F7FC; flex: 75%; display: flex; flex-direction:column;">
            <!-- 上半 -->
            <div style="flex:50%;display:flex;">
                <!-- 左上 -->
                <div style="flex:50%;">
                    <a>
                        <div class="carddiy" style="margin-left:35%">
                            <div class="top">
                                <svg t="1705331988572" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4239" width="40" height="40"><path d="M841.322 87.089h-3.9L541.113 167.9v-0.031h-57.292L186.577 86.803h-3.898c-47.329 0-85.833 38.504-85.833 85.834v595.568c0 22.92 8.948 43.111 25.875 58.393 12.931 11.674 30.025 20.311 52.204 26.391 1.558 0.43 156.07 43.113 307.962 83.951l0.956 0.258h55.15l2.121-0.559c154.5-40.689 306.48-82.951 308.012-83.379l1.078-0.322c21.422-6.861 37.787-15.387 50.029-26.064 17.613-15.363 26.922-35.551 26.922-58.381v-595.57c-0.001-47.328-38.505-85.834-85.833-85.834zM190.375 796.848c-35.303-9.676-35.303-22.967-35.303-28.643V172.637c0-14.134 10.678-25.822 24.39-27.421l303.424 82.752v648.673c-146.655-39.502-290.952-79.362-292.511-79.793z m678.553-28.356c0 5.154 0 17.191-35.969 28.826-9.916 2.756-147.693 41.006-291.846 79.1V228.254l303.424-82.751c13.713 1.599 24.391 13.287 24.391 27.421v595.568z" p-id="4240"></path></svg>
                            </div>
                            <div class="bottom">
                                <h3 class="botm_title" id="title_box1"></h3>
                                <p class="botm_ph" id="content_box1"></p>
                            </div>
                        </div>
                    </a>
                </div>
                <!-- 右上 -->
                <div style="flex:50%;">
                    <a>
                        <div class="carddiy" style="margin-left:5%">
                            <div class="top">
                                <svg t="1705331988572" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4239" width="40" height="40"><path d="M841.322 87.089h-3.9L541.113 167.9v-0.031h-57.292L186.577 86.803h-3.898c-47.329 0-85.833 38.504-85.833 85.834v595.568c0 22.92 8.948 43.111 25.875 58.393 12.931 11.674 30.025 20.311 52.204 26.391 1.558 0.43 156.07 43.113 307.962 83.951l0.956 0.258h55.15l2.121-0.559c154.5-40.689 306.48-82.951 308.012-83.379l1.078-0.322c21.422-6.861 37.787-15.387 50.029-26.064 17.613-15.363 26.922-35.551 26.922-58.381v-595.57c-0.001-47.328-38.505-85.834-85.833-85.834zM190.375 796.848c-35.303-9.676-35.303-22.967-35.303-28.643V172.637c0-14.134 10.678-25.822 24.39-27.421l303.424 82.752v648.673c-146.655-39.502-290.952-79.362-292.511-79.793z m678.553-28.356c0 5.154 0 17.191-35.969 28.826-9.916 2.756-147.693 41.006-291.846 79.1V228.254l303.424-82.751c13.713 1.599 24.391 13.287 24.391 27.421v595.568z" p-id="4240"></path></svg>
                            </div>
                            <div class="bottom">
                                <h3 class="botm_title" id="title_box2"></h3>
                                <p class="botm_ph" id="content_box2"></p>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
            <!-- 下半 -->
            <div style="flex:50%;display:flex;">
                <!-- 左下 -->
                <div style="flex:50%;">
                    <a>
                        <div class="carddiy" style="margin-left:35%">
                            <div class="top">
                                <svg t="1705331988572" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4239" width="40" height="40"><path d="M841.322 87.089h-3.9L541.113 167.9v-0.031h-57.292L186.577 86.803h-3.898c-47.329 0-85.833 38.504-85.833 85.834v595.568c0 22.92 8.948 43.111 25.875 58.393 12.931 11.674 30.025 20.311 52.204 26.391 1.558 0.43 156.07 43.113 307.962 83.951l0.956 0.258h55.15l2.121-0.559c154.5-40.689 306.48-82.951 308.012-83.379l1.078-0.322c21.422-6.861 37.787-15.387 50.029-26.064 17.613-15.363 26.922-35.551 26.922-58.381v-595.57c-0.001-47.328-38.505-85.834-85.833-85.834zM190.375 796.848c-35.303-9.676-35.303-22.967-35.303-28.643V172.637c0-14.134 10.678-25.822 24.39-27.421l303.424 82.752v648.673c-146.655-39.502-290.952-79.362-292.511-79.793z m678.553-28.356c0 5.154 0 17.191-35.969 28.826-9.916 2.756-147.693 41.006-291.846 79.1V228.254l303.424-82.751c13.713 1.599 24.391 13.287 24.391 27.421v595.568z" p-id="4240"></path></svg>
                            </div>
                            <div class="bottom">
                                <h3 class="botm_title" id="title_box3"></h3>
                                <p class="botm_ph" id="content_box3"></p>
                            </div>
                        </div>
                    </a>
                </div>
                <!-- 右下 -->
                <div style="flex:50%;">
                    <a>
                        <div class="carddiy" style="margin-left:5%">
                            <div class="top">
                                <svg t="1705331988572" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4239" width="40" height="40"><path d="M841.322 87.089h-3.9L541.113 167.9v-0.031h-57.292L186.577 86.803h-3.898c-47.329 0-85.833 38.504-85.833 85.834v595.568c0 22.92 8.948 43.111 25.875 58.393 12.931 11.674 30.025 20.311 52.204 26.391 1.558 0.43 156.07 43.113 307.962 83.951l0.956 0.258h55.15l2.121-0.559c154.5-40.689 306.48-82.951 308.012-83.379l1.078-0.322c21.422-6.861 37.787-15.387 50.029-26.064 17.613-15.363 26.922-35.551 26.922-58.381v-595.57c-0.001-47.328-38.505-85.834-85.833-85.834zM190.375 796.848c-35.303-9.676-35.303-22.967-35.303-28.643V172.637c0-14.134 10.678-25.822 24.39-27.421l303.424 82.752v648.673c-146.655-39.502-290.952-79.362-292.511-79.793z m678.553-28.356c0 5.154 0 17.191-35.969 28.826-9.916 2.756-147.693 41.006-291.846 79.1V228.254l303.424-82.751c13.713 1.599 24.391 13.287 24.391 27.421v595.568z" p-id="4240"></path></svg>
                            </div>
                            <div class="bottom">
                                <h3 class="botm_title" id="title_box4"></h3>
                                <p class="botm_ph" id="content_box4"></p>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        let question = "";
        function submitQuestion(buttonElement) {
            const questionInput = document.getElementById('question').value.trim();
            if(questionInput==""){
                return ;
            }
            question = questionInput;

            buttonElement.innerText = '正在学习中...';
            buttonElement.disabled = true;

            fetch(`/ask?question=${encodeURIComponent(question)}`)
                .then(response => response.json())
                .then(data =>{
                    const moduleTitles = [];
                    const moduleContents = [];
                    for (let i = 0; i < data.length; i++) {
                        let moduleTitle = data[i].title;
                        let moduleContent = data[i].content;
                        moduleTitles.push(moduleTitle);
                        moduleContents.push(moduleContent);
                        document.getElementById(`title_box${i+1}`).innerText = moduleTitle;
                        document.getElementById(`content_box${i+1}`).innerText = moduleContent;
                    }
                    console.log(data);
                    console.log(moduleTitles);
                    console.log(moduleContents);
                })
                .catch((error) => {
                    console.error('Error:', error);
                });
        }
    </script>
</body>
</html>